{% extends 'base.html' %}

{% block content %}

<h1>Buscar medidor</h1>

<form method="GET" action="{% url 'tasks' %}">
  <label for="query">Buscar</label>
  <div class="input-container">
    <input type="text" id="query" name="query" placeholder="No. medidor">
    <button type="submit" class="search-btn">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#fff" width="18px" height="18px"><path d="M21.707,20.293l-4.2-4.2a8.976,8.976,0,1,0-1.414,1.414l4.2,4.2a1,1,0,1,0,1.414-1.414ZM10,16A6,6,0,1,1,16,10,6.007,6.007,0,0,1,10,16Z"></path></svg>
    </button>
  </div>
</form>

<ul class="task-list">
  {% if tasks %}
    {% for task in tasks %}
      <li class="task-item">
        <a href="{% url 'task_detail' task.id %}" class="task-link">
          {% if task.important %}
            <strong>Medidor: {{task.title}}</strong>
          {% else %} 
            {{task.title}} 
          {% endif %}
          <p>Coordenadas: {{task.description}}</p>
          {{task.datecompleted|date:'M j Y:i'}}
          {% if task.description %}
            <a href="https://www.google.com/maps/place/{{task.description}}" class="map-link">Ver ubicaci√≥n en Google Maps</a>
          {% endif %}
        </a>
      </li>
    {% endfor %}
  {% else %}
    <p>No se encontraron tareas.</p>
  {% endif %}
</ul>

{% endblock %}

{% block css %}
  <link rel="stylesheet" href="{% static 'css/tasks.css' %}">
{% endblock %}
